{* debug *}

{* OLD - check and remove! *}

<a href="#" onclick="extra_insert_after({$EXTRA_DATA[i].origin_uid}, {$DATA[i].pagezone_id});">{$NEW_EXTRA_ICON}</a>

{if sizeof($EXTRA_DATA) == 0}
	<div>{$MESSAGE.pagezone_empty}</div>
{else}
	<table style="margin-bottom: 21px;"  border="1" cellpadding="1" cellspacing="0">
	<tr>
	<td>{$LABEL.extra}</td>
	<td align="center">{$LABEL.show}</td>
<td>Paragraph</td>
	<td>{$LABEL.commands}</td>
	</tr>
		{section name=i loop=$EXTRA_DATA} 
		{if ($smarty.section.i.index % 2 == 0)}
			<tr class="bg1">
		{else}
			<tr class="bg2">
		{/if}
				<td> {$EXTRA_DATA[i].extra_type}<br /><span class="gray">{$EXTRA_DATA[i].title}</span> </td>
				<td align="center">
		{if $EXTRA_DATA[i].show == 0}
		<input type="checkbox" onchange="extra_set_show({$EXTRA_DATA[i].uid}, 1);" /> 
		{else}
		<input type="checkbox" onchange="extra_set_show({$EXTRA_DATA[i].uid}, 0);" checked="checked" />
		{/if}
				</td>
		
				<td align="center">
					<input style="width: 25px;" type="text" value="{$EXTRA_DATA[i].paragraph}" />
				</td>
		
		
				<td> 
		{if $EXTRA_DATA[i].origin_placement == true} 
		  <a href="#" onclick="extra_edit('{$EXTRA_DATA[i].concrete_table}', {$EXTRA_DATA[i].concrete_uid});">{$EDIT_ICON}</a>
		{else}
		  {$EMPTY_ICON}
		{/if} 

{* \todo: move up/down for same paragraph only! *}		
		{* calculate index for origin uid for moving extras up and down *}	
		{math assign="move_up_after_index" equation="x-2" x=$smarty.section.i.index}
		{math assign="move_down_after_index" equation="x+1" x=$smarty.section.i.index}
		{if $smarty.section.i.index == 0} 
		  {$EMPTY_ICON}
		{else}
		  {if $move_up_after_index < 0}
		    <a href="javascript:extra_move_after(0, {$DATA[i].pagezone_id}, {$EXTRA_DATA[i].uid});">{$MOVE_UP_ICON}</a> {* move to top *}
		  {else}
			<a href="javascript:extra_move_after({$EXTRA_DATA[i][$move_up_after_index].origin_uid}, {$DATA[i].pagezone_id}, {$EXTRA_DATA[i].uid});">{$MOVE_UP_ICON}</a>
		  {/if}
		{/if}
		{if $smarty.section.i.index < $smarty.section.i.total-1} 
		  <a href="javascript:extra_move_after({$EXTRA_DATA[i][$move_down_after_index].origin_uid}, {$DATA[i].pagezone_id}, {$EXTRA_DATA[i].uid});">{$MOVE_DOWN_ICON}</a>
		{else}
		  {$EMPTY_ICON}
		{/if}
		
		{if $EXTRA_DATA[i].origin_placement == true} 
		  <a href="javascript:extra_delete({$DATA[i].pagezone_id}, {$EXTRA_DATA[i].uid}, '{$LABEL.extra_delete_confirm}');">{$DELETE_ICON}</a>
		{else}
		  {$EMPTY_ICON}
		{/if} 
		
				</td>
		
		{if $EXTRA_DATA[i].position}
			<td>{$EXTRA_DATA[i].paragraph}</td>
			<td>{$EXTRA_DATA[i].position}</td>
			<td>{$EXTRA_DATA[i].uid}</td>
		{/if}
			</tr>
		{/section}
	</table>
{/if}	