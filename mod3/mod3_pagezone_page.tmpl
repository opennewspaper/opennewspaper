{* debug *}

<script language="javascript" >
	{section name=i loop=$EXTRA_DATA} {* store default values for paragraphs *}
		document.def_notes[{$EXTRA_DATA[i].uid}] = '{$EXTRA_DATA[i].notes|escape:'quotes'}';
	{/section}
</script>

<table style="margin-bottom: 21px;">
<tr>
	<td>{$LABEL.extra}</td>
	<td>{$LABEL.notes}</td>
	<td>{$LABEL.templateset}</td>
	<td align="center">{$LABEL.show}</td>
	<td align="center">{$LABEL.pass_down}</td>
	<td align="center">{$LABEL.inherits_from}</td>
	<td>{$LABEL.commands}</td>
	{if ($DEBUG_OUTPUT && $ADMIN)}
		<td align="center">pos</td>
		<td align="center">origin</td>
		<td align="center">uid</td>
	{/if}
</tr>
	{section name=i loop=$EXTRA_DATA} 
		{if ($smarty.section.i.index % 2 == 0)}
			<tr class="bg1">
		{else}
			<tr class="bg2">
		{/if}
				<td> {$EXTRA_DATA[i].extra_type}<br /><span class="gray">{$EXTRA_DATA[i].title}</span> </td>
				<td id="notes_td_{$EXTRA_DATA[i].uid}">
					<input id="notes_{$EXTRA_DATA[i].uid}" onChange="changeField({$EXTRA_DATA[i].uid}, 'notes'); return false;" style="width: 100px" type="text" value='{$EXTRA_DATA[i].notes|escape:'html'}' />
					<span style="display: none" id="save_notes_{$EXTRA_DATA[i].uid}"> <a href="#" onclick="saveField({$DATA.pagezone_id}, {$EXTRA_DATA[i].uid}, 'notes', 0); return false;">{$SAVE_ICON}</a> <a href="#" onclick="undoField({$EXTRA_DATA[i].uid}, 'notes'); return false;">{$UNDO_ICON}</a></span> 
				</td>
				<td>{$EXTRA_DATA[i].template_set_HTML}</td>
				<td align="center">
		{if $EXTRA_DATA[i].show == 0}
		<input type="checkbox" onchange="extra_set_show({$EXTRA_DATA[i].uid}, 1);" /> 
		{else}
		<input type="checkbox" onchange="extra_set_show({$EXTRA_DATA[i].uid}, 0);" checked="checked" />
		{/if}
				</td>
				<td align="center">
		{if $EXTRA_DATA[i].pass_down == 0}
		<input type="checkbox" onchange="extra_set_pass_down({$DATA.pagezone_id}, {$EXTRA_DATA[i].uid}, 1);" />
		{else}
		<input type="checkbox" onchange="extra_set_pass_down({$DATA.pagezone_id}, {$EXTRA_DATA[i].uid}, 0);" checked="checked" />
		{/if}
				</td>
				<td> {$EXTRA_DATA[i].inherits_from} </td>
		
		
				<td> 
		{if $EXTRA_DATA[i].origin_placement == true} 
		  <a href="javascript:extra_edit('{$EXTRA_DATA[i].concrete_table}', {$EXTRA_DATA[i].concrete_uid}, -1, 0);">{$EDIT_ICON}</a>
		{else}
		  {$EMPTY_ICON}
		{/if} 

{* new after *}
		<a href="javascript:extra_insert_after({$EXTRA_DATA[i].origin_uid}, {$DATA.pagezone_id}, false, false);">{$NEW_BELOW_ICON}</a>

{* move up/down *}			
		{* calculate index for origin uid for moving extras up and down *}	
		{math assign="move_up_after_index" equation="x-2" x=$smarty.section.i.index}
		{math assign="move_down_after_index" equation="x+1" x=$smarty.section.i.index}
		{if $smarty.section.i.index == 0} 
		  {$EMPTY_ICON}
		{else}
		  {if $move_up_after_index < 0}
		    <a href="javascript:extra_move_after(0, {$DATA.pagezone_id}, {$EXTRA_DATA[i].uid});">{$MOVE_UP_ICON}</a> {* move to top *}
		  {else}
			<a href="javascript:extra_move_after({$EXTRA_DATA[$move_up_after_index].origin_uid}, {$DATA.pagezone_id}, {$EXTRA_DATA[i].uid});">{$MOVE_UP_ICON}</a>
		  {/if}
		{/if}
		{if $smarty.section.i.index < $smarty.section.i.total-1} 
		  <a href="javascript:extra_move_after({$EXTRA_DATA[$move_down_after_index].origin_uid}, {$DATA.pagezone_id}, {$EXTRA_DATA[i].uid});">{$MOVE_DOWN_ICON}</a>
		{else}
		  {$EMPTY_ICON}
		{/if}
		
{* delete *}
		{if $EXTRA_DATA[i].origin_placement == true} 
		  <a href="javascript:extra_delete({$DATA.pagezone_id}, {$EXTRA_DATA[i].uid}, '{$LABEL.extra_delete_confirm}');">{$DELETE_ICON}</a>
		{else}
		  {$EMPTY_ICON}
		{/if} 
				</td>
		
		{if ($DEBUG_OUTPUT && $ADMIN)}
			{* if td's are added here, add them to in the table header *}
			<td>{$EXTRA_DATA[i].position}</td>
			<td>{$EXTRA_DATA[i].origin_uid}</td>
			<td>{$EXTRA_DATA[i].uid}</td>
		{/if}
			</tr>
	{/section}
</table>
